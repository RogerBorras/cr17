{
    "collab_server" : "",
    "contents" : "#fit <- fitSurvival(\"time\", \"risk\", \"group\", data)\n\n\n#crSummary(\"time\", \"event\", \"gender\", LUAD, 1200, \"alive\")\n#crSummary(\"time\", \"risk\", \"group\", data, 4)\n#crSummary(\"CI_time\", \"CI_status\", \"Heart\", dt, 10)\n\n#' @title full analysis of data\n#' @name fullAnalysis\n#' @description The functionn\n#' @param time time must be numeric\n#' @param risk can be numeric or factor/character\n#' @param group can be numeric or factor/character\n#' @param data can\n#'  be data frame or matrix\n#' @param type \"kaplan-meier\", \"fleming-harrington\" or \"fh2\"\n#' @param conf.int level of two sided conf int\n#' @param conf.type \"none\", \"plain\", \"log\" (default), \"log-log\n#' @param error \"greenwood (default)', \"tsiatis\", \"aalen\n#' @export\n#' @importFrom gridExtra grid.arrange rbind.gtable tableGrob\n#' @importFrom grid textGrob\n\n\ncrSummary <- function(time,\n                        risk,\n                        group,\n                        data,\n                        target,\n                        cens = 0,\n                        rho = 0,\n                        type = \"kaplan-meier\",\n                        conf.int = 0.95,\n                        conf.type = \"log\"\n){\n\n    fit <- fitSurvival(time, risk, group, data, cens, type, conf.int, conf.type)\n    ci <- fitCuminc(time, risk, group, data, cens, rho)\n\n    lrtSurvTest <- lrtSurvival(time, risk, group, data, cens, rho)\n    cumincTest <- testCuminc(ci)\n\n\n    fitCox <- fitCox(time, risk, group, data, cens)\n    CoxSurvTest <- testCox(fitCox)\n\n    fitReg <- fitReg(time, risk, group, data, cens)\n    CoxCompTest <-  regTest(fitReg, conf.int)\n\n    #Plots\n    plotSurvCurves <- plotSurvival(fit, target)\n    plotCumFun <- plotCuminc(ci, risk, group, target)\n\n    #tables\n    riskTable <- riskTab(fit)\n    # for(i in 1:length(riskTable)){\n    #     assign(paste(\"riskTab\", i, sep = \"\"), riskTable[[i]])\n    # }\n    eventTable <- eventTab(fit, ci, risk, group)\n    # for(i in 1:length(eventTable)){\n    #     assign(paste(\"eventTab\", i, sep = \"\"), eventTable[[i]])\n    # }\n\n\n\n    Test1 <- rbind(lrtSurvTest, CoxSurvTest)\n    Test2 <- rbind(cumincTest, CoxCompTest)\n\n    #Tests\n    Tests <- arrangeGrob(tableGrob(Test1, theme = ttheme_minimal()),\n                         tableGrob(Test2, theme = ttheme_minimal()),\n                         top =  textGrob(\"Tests of differences betweeen groups\",\n                                         vjust = 3,\n                                         gp = gpar(fontface = \"bold\")),\n                         ncol = 2)\n\n\n    lay <- rbind(c(1,2),\n                 c(1,2),\n                 c(1,2),\n                 c(3,4),\n                 c(5,5),\n                 c(5,5))\n\n    grid.arrange(plotSurvCurves,\n                 plotCumFun,\n                 riskTable,\n                 eventTable,\n                 Tests,\n                 layout_matrix = lay)\n\n}\n",
    "created" : 1498585916951.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3057345585",
    "id" : "1D05EBD1",
    "lastKnownWriteTime" : 1498592195,
    "last_content_update" : 1498592195966,
    "path" : "~/GitHub/mgr/kod/package/cr17/R/crSummary.R",
    "project_path" : "R/crSummary.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}